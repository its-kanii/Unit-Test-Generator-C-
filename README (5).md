
# ðŸš€ Unit Test Generator for C++ Application using AI

##  Project Overview

This project builds a **unit test generator tool** for a C++ application (`orgChartApi`) using **LLM-based generation**. The tool uses **Ollama** for AI-driven test generation and iterative refinement, integrating with `GoogleTest`, `lcov`, and `gcov` to measure coverage.

---

## ðŸ“ Project Structure

```
orgChartApi/
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ AuthController.cc/h
â”œâ”€â”€ models/
â”‚   â””â”€â”€ User.cc/h
â”œâ”€â”€ plugins/
â”‚   â””â”€â”€ JwtPlugin.cc/h
â”œâ”€â”€ test/
â”‚   â””â”€â”€ test_controllers.cc      #  Unit tests generated via AI
â”œâ”€â”€ build/                       #  CMake build directory
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ config.json
â”œâ”€â”€ coverage.info                #  Generated by lcov
â”œâ”€â”€ out/                         #  HTML coverage report (from genhtml)
```

---

##  AI Model Used

- **Ollama** (self-hosted)
  - Used to:
    - Generate initial unit test stubs
    - Refine tests via strict YAML prompts
    - Handle build failures and suggest fixes

---

##  Tools and Technologies

| Tool       | Purpose                          |
|------------|----------------------------------|
| Drogon     | Web framework for the C++ app    |
| GoogleTest | Unit testing framework           |
| Ollama     | Local LLM model                  |
| CMake      | Build configuration              |
| lcov + genhtml | Code coverage generation     |
| YAML       | Prompt structuring for the LLM   |

---

##  How It Works

1. **Initial Test Generation**:  
   Source code was sent to **Ollama** along with a strict YAML prompt.  
    Output: `test/test_controllers.cc`

2. **Test Refinement**:  
   Refined prompts improved:
   - Code formatting
   - Eliminated duplicates
   - Added missing headers

3. **Build & Fixes**:  
   Compilation errors were fixed with help from:
   - Model feedback loop
   - Dropping improper macro usage
   - Fixing missing plugin config in `config.json`

4. **Coverage Measurement**:
   - Rebuilt with `--coverage` flag
   - Tests run via `./test/org_chart_test`
   - Report generated:
     ```bash
     lcov --capture --directory . --output-file coverage.info --ignore-errors mismatch
     genhtml coverage.info --output-directory out --ignore-errors empty
     xdg-open out/index.html
     ```

---

##  Test Coverage

-  Test for `AuthController::registerUser` fully covered
-  Token validation and DB insertions verified
-  `out/index.html` contains detailed per-file metrics

---

##  Deliverables

- [x] `test/test_controllers.cc` (AI-generated & refined)
- [x] YAML prompt file (used to instruct model)
- [x] `coverage.info` + `out/index.html`
- [x] GoogleTest-based executable test runner
- [x] CMake + Drogon integration
- [x] `config.json` with proper plugin configuration
- [x] README with all details 

---

## ðŸŽ¯ Final Result

> **All tests passed (6 assertions in 1 test case)**  
> **LCOV HTML report successfully generated**  

